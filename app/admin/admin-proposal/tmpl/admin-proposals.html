<admin-nav-route></admin-nav-route>
<admin-section>
	<header>
		<h2><i class="fa fa-thumbs-o-up" aria-hidden="true"></i> Liste des propositions</h2>
		<div>
			<admin-export-db-route></admin-export-db-route>
			<a ui-sref="admin:signout"><i class="fa fa-sign-out" aria-hidden="true"></i> Déconnexion</a>
		</div>
	</header>
	<section>
		<div class="container">
			<div class="card">
				<div class="content">
					<div ng-show="$ctrl.proposal.length > 0" class="fresh-datatables">
						<button class="download" export-to-csv>Export en fichier csv</button>
						<table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
							<thead>
								<tr>
									<th>Id</th>
									<th>Image</th>
									<th>Titre de l'annonce</th>
									<th>Type d'annonce</th>
									<th>Message</th>
									<th>Envoyé le</th>
									<th class="text-center">Actions</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="proposal in $ctrl.proposal">
									<td>{{proposal.id}}</td>
									<td><img src="../{{proposal.content.imageUrl}}" /></td>
									<td>{{proposal.content.titleAd}}</td>
									<td ng-show="proposal.content.adType === 'loader'">Chargeur</td>
									<td ng-show="proposal.content.adType === 'carrier'">Transporteur</td>
									<td>{{proposal.content.message}}</td>
									<td>{{proposal.content.created_t | ts2date | date : "EEEE d LLLL yyyy à H'h'" | ucfirst}}</td>
									<td class="text-center">
										<a ui-sref="admin:proposal:remove({id: proposal.id})" class="remove"><i class="fa fa-times"></i></a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<p ng-show="$ctrl.proposal.length === 0">Aucune proposition envoyée pour le moment.</p>
				</div>
				<!-- end content-->
			</div>
			<!--  end card  -->
		</div>
	</section>
	<admin-footer-route></admin-footer-route>
</admin-section>
